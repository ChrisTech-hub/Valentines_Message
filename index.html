<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<title>Valentine Surprise üíò</title>

<style>
body {
    margin: 0;
    min-height: 100vh;
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #ff9a9e, #fad0c4);
    display: flex;
    justify-content: center;
    align-items: center;
    overflow-x: hidden;
}

h1 { 
    color: #ff4d6d; 
    font-size: 1.8rem;
}

p{
    font-size: 1rem;
}

hr{
    width: 100%;
    border: 1px solid #ff4d6d;
    z-index: 6;
    opacity: 0.5;
}

.container {
    position: relative;
    z-index: 3;
    text-align: center;
    background: white;
    padding: 2rem;
    border-radius: 20px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
    animation: fadeIn 1s ease;
}

input {
    width: 100%;
    padding: 12px 0;
    margin-top: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
}

button {
    width: 100%;
    margin-top: 15px;
    padding: 10px 0;
    border-radius: 20px;
    border: none;
    background: #ff4d6d;
    color: white;
    cursor: pointer;
}

button:hover { background: #e63b5c; }

.letter {
    display: none;
    margin-top: 20px;
    padding: 18px;
    border-radius: 15px;
    background: #fff0f5;
    box-shadow: 0 0 10px #000;
    max-height: 50vh;      
    overflow-y: auto;      
    box-sizing: border-box;
}

.messageTo {
    margin-top: 15px;
}

.messageTo .input-wrapper {
    position: relative;
    width: 100%;
}

.messageTo input {
    width: 100%;
    padding: 12px 40px 12px 12px; /* space for send button */
    border-radius: 10px;
    border: 1px solid #ccc;
    box-sizing: border-box;
}

.messageTo .fa-send {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #ff4d6d;
    font-size: 18px;
}

#messageBack{
    position: relative;
}

.admin{
    position:fixed;
    top:10px;
    right:10px;
    cursor:pointer;
    border:none;
    border-radius:20px;
}

.shake { animation: shake 0.4s; }

.person-img {
    position: absolute;
    width: 30vw;
    max-width: 140px;
    opacity: 0.8;
    animation: floatSlow 10s ease-in-out infinite alternate;
    pointer-events: none;
    border-radius: 10px;
}

.heart {
    position: fixed;
    font-size: 24px;
    animation: float 4s linear forwards;
    pointer-events: none;
    z-index: 5;
}

@keyframes shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(-6px); }
    50% { transform: translateX(6px); }
    75% { transform: translateX(-6px); }
    100% { transform: translateX(0); }
}

@keyframes floatRandom {
    0% {
        transform: translate(0, 0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translate(var(--x), var(--y)) rotate(var(--r));
        opacity: 0;
    }
}

@keyframes floatSlow {
    from { transform: translateY(0); }
    to { transform: translateY(-20px); }
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}
</style>
</head>

<body>

<div class="admin" onclick="adminLogin()">‚öôÔ∏è</div>

<div class="container" id="box">
    <h1>Valentine Access</h1>
    <hr>

    <input type="text" id="userName" placeholder="Enter your name" required>
    <input type="password" id="password" placeholder="Password (Provided)" required>

    <div class="messageTo">
        <div class="input-wrapper">
            <input type="text" id="messageBack" placeholder="Write a Message to Christian (optional)">
            <i class="fa fa-send" onclick="sendMessage()"></i>
        </div>
    </div>

    <button onclick="checkPassword()">Open üíå</button>

    <div class="letter" id="letter"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
const ADMIN_PASSWORD = "phuwin";

/* üî• FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "AIzaSyDVMdVdmTUaOtLKntpzV0C00cfWTxdQZYA",
  authDomain: "valentine-access-free.firebaseapp.com",
  projectId: "valentine-access-free",
  storageBucket: "valentine-access-free.firebasestorage.app",
  messagingSenderId: "114132752770",
  appId: "1:114132752770:web:7ef60ede7dd209ebbc579b"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* PEOPLE */
const people = {
    "barayMare08": {
        name: "Baray/Mare",
        text: "I just wanted to take a moment to tell you how much your friendship means to me. Through all the laughs, the crazy moments, and even the times we just sit in silence, you‚Äôve always been someone I can count on. I really appreciate how we understand each other without even needing words sometimes. You‚Äôve been there in the good times and the not-so-good times, and that kind of friendship is rare. I hope we keep making memories together, laughing until our stomachs hurt, and supporting each other no matter what comes our way. Thanks for being an amazing friend. Here‚Äôs to many more adventures, secrets, and unforgettable moments ahead! Your friend, xoxo",
        images: [
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/fccc54210b4c52bff2916ecccfbb0c3518ad5456/1718445969090.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/fccc54210b4c52bff2916ecccfbb0c3518ad5456/1718445989400.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/fccc54210b4c52bff2916ecccfbb0c3518ad5456/1728090061025.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/fccc54210b4c52bff2916ecccfbb0c3518ad5456/IMG20240529110045_00_011402.jpg",
        ]
    },
    
    "BSIT1-B": { 
        name:"BSIT 1-B", 
        text: "I just wanted to say thank you for making this college journey such an unforgettable experience. Each of you has added something special to my time here whether it‚Äôs the teamwork during projects, the laughs between classes, or just the daily support we give each other. Even though we all have different paths and goals, I feel lucky to have shared these moments with you. The memories we‚Äôve created, the challenges we‚Äôve faced together, and the friendships we‚Äôve built will always hold a special place in my heart. I hope we continue to support and inspire each other, even beyond these college walls. Wishing everyone success, happiness, and endless opportunities in whatever comes next!", 
        images: [
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/553d0360169b43be964c8b69992c904466ce32e5/612273463_25884572274528263_1443463016273151729_n.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/553d0360169b43be964c8b69992c904466ce32e5/621256089_2376866916145302_8123482212709929544_n.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/553d0360169b43be964c8b69992c904466ce32e5/626509530_1064029002580740_5083599679043519725_n.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/553d0360169b43be964c8b69992c904466ce32e5/627231185_2307050259780404_1039529006496946537_n.jpg",
        ] 
    },

     "teYangie01": {name: "Yang Paulina",
                   text: "I just want to take a moment to tell you how much you mean to me. You‚Äôve always been there through the good days, the bad days, and all the random college chaos in between. Whenever I need someone, you show up, and that kind of loyalty and care is rare. Even though you did reveal my secret üòÖ, it honestly doesn‚Äôt change a thing. Mistakes happen, and it‚Äôs part of what makes us human. You‚Äôre still my bestie, my partner-in-crime, and one of the people I trust the most in this world. Thank you for laughing with me, supporting me, and making college life so much brighter. I‚Äôm really lucky to have you, and I hope we keep making memories and having each other‚Äôs backs no matter what. You really are the best, and I appreciate you more than words can ever show. ü´∂",
                   images:[
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/804a94ad32cecc8e58b2a558c348ed419afb9eeb/2419ea40-d020-4ebe-accd-886918e5ceb0.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/804a94ad32cecc8e58b2a558c348ed419afb9eeb/49e72819-24b3-4c7f-9b9b-6606afef20c3.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/804a94ad32cecc8e58b2a558c348ed419afb9eeb/Screenshot%202026-02-09%20202301.png",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/804a94ad32cecc8e58b2a558c348ed419afb9eeb/df633375-bbe9-4db8-8149-792bcdea0608.jpg",
            "https://raw.githubusercontent.com/ChrisTech-hub/valentines_img/804a94ad32cecc8e58b2a558c348ed419afb9eeb/ebab1a21-2cd5-49a0-9c66-e8edd8696a9e.jpg"
            ]
               },
};

/* SAVE LOG */
function record(name, status, password="") {
    db.collection("logs").add({
        name: name,
        status: status,
        password: password,
        time: firebase.firestore.FieldValue.serverTimestamp()
    });
}

// Images and Animations
function clearImages() {
    document.querySelectorAll(".person-img").forEach(img => img.remove());
}

function showPersonImages(images) {
    images.forEach(src => {
        for (let i = 0; i < 3; i++) {
            const img = document.createElement("img");
            img.src = src;
            img.className = "person-img";
            img.style.top = Math.random() * 70 + "%";
            img.style.left = Math.random() * 80 + "%";
            img.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
            document.body.appendChild(img);
        }
    });
}

function hearts(symbol, count) {
    for (let i = 0; i < count; i++) {
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = symbol;

        // Random starting position
        h.style.left = Math.random() * 100 + "vw";
        h.style.top = Math.random() * 100 + "vh";

        // Random direction and rotation
        const x = (Math.random() * 200 - 100) + "px"; // horizontal movement
        const y = (Math.random() * 200 - 100) + "px"; // vertical movement
        const r = (Math.random() * 360 - 180) + "deg"; // rotation

        h.style.setProperty("--x", x);
        h.style.setProperty("--y", y);
        h.style.setProperty("--r", r);
        h.style.animation = `floatRandom ${2 + Math.random() * 3}s ease-out forwards`;

        document.body.appendChild(h);

        // Remove after animation
        setTimeout(() => h.remove(), 5000);
    }
}

/* CHECK PASSWORD */
function checkPassword() {
    const name = userName.value.trim();
    const pass = password.value.trim();
    const box = document.getElementById("box");
    const letter = document.getElementById("letter");

    if (!name) return alert("Please enter your name üíñ");

    clearImages();

    if (people[pass]) {
        record(name, "Success", pass);
        hearts("üíñ", 50);
        showPersonImages(people[pass].images);

        userName.style.display = "none";
        password.style.display = "none";
        box.querySelector("button").style.display = "none";

        letter.style.display = "block";
        letter.innerHTML = `
            <h3>Dear ${people[pass].name},</h3>
            <p>${people[pass].text}</p>
            <button onclick="location.reload()">Back to Home</button>
        `;
    } else {
        record(name, "Failed", pass);
        box.classList.add("shake");
        hearts("üíî", 50);
        setTimeout(() => box.classList.remove("shake"), 400);
    }
}

/* SEND MESSAGE */
function sendMessage() {
    const name = userName.value.trim();
    const msg = document.getElementById("messageBack").value.trim();

    if (!name) return alert("Please enter your name before sending a message üíñ");
    if (!msg) return alert("Please write a message before sending üíå");

    db.collection("messages").add({
        name: name,
        message: msg,
        time: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
        alert("Message sent! üíå");
        document.getElementById("messageBack").value = "";
    }).catch(err => {
        console.error(err);
        alert("Error sending message ‚ùå");
    });
}

/* ADMIN PANEL */
async function adminLogin() {
    if (prompt("Admin password") !== ADMIN_PASSWORD) return;

    const logsSnapshot = await db.collection("logs").orderBy("time","desc").get();
    const messagesSnapshot = await db.collection("messages").orderBy("time","desc").get();

    let html = `<h3>Access Logs</h3>
        <button onclick="clearAllLogs()" style="background:red;color:white;padding:8px 15px;border:none;border-radius:10px;margin-bottom:15px;cursor:pointer;">Clear All Logs</button>
        <hr>`;

    logsSnapshot.forEach(doc => {
        const l = doc.data();
        html += `
            <div style="margin-bottom:10px;padding:10px;border:1px solid #ccc;border-radius:10px;">
                <b>${l.name}</b> - ${l.status}<br>
                ${l.time ? l.time.toDate().toLocaleString() : ""}
                <br>
                <button onclick="deleteLog('${doc.id}')" style="margin-top:5px;background:#ff4d6d;color:white;border:none;padding:5px 10px;border-radius:8px;cursor:pointer;">Delete</button>
            </div>
        `;
    });

    html += `<h3>Messages</h3><hr>`;
    messagesSnapshot.forEach(doc => {
        const m = doc.data();
        html += `
            <div style="margin-bottom:10px;padding:10px;border:1px solid #ccc;border-radius:10px;">
                <b>${m.name}</b>: ${m.message}<br>
                ${m.time ? m.time.toDate().toLocaleString() : ""}
            </div>
        `;
    });

    const panel = document.createElement("div");
    panel.id="adminPanel";
    panel.style="position:fixed;inset:10%;background:#fff;padding:20px;overflow:auto;z-index:9999;border-radius:15px;";
    panel.innerHTML = html;
    panel.onclick = e => e.target === panel && panel.remove();
    document.body.appendChild(panel);
}

/* DELETE SINGLE LOG */
async function deleteLog(id) {
    if (!confirm("Delete this log?")) return;
    await db.collection("logs").doc(id).delete();
    document.getElementById("adminPanel").remove();
    adminLogin();
}

/* CLEAR ALL LOGS */
async function clearAllLogs() {
    if (!confirm("Clear ALL logs?")) return;
    const snapshot = await db.collection("logs").get();
    const batch = db.batch();
    snapshot.forEach(doc => batch.delete(doc.ref));
    await batch.commit();
    document.getElementById("adminPanel").remove();
    alert("All logs deleted.");
}
</script>

</body>
</html>
